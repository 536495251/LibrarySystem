![image](https://github.com/536495251/LibrarySystem/assets/93455516/76534d8b-9d78-40e4-be12-16336d1c59c3)# LibrarySystem

科学技术学院
SCIENCE & TECHNOLOGY COLLEGE OF 
NANCHANG  UNIVERSITY
《工程训练实验与设计》报告
REPORT  ON  INTEGRATED  EXPERIMENT AND DESIGN



题   目 基于传统协同过滤推荐算法图书借阅管理系统     

学科部、系： 信息学科部计算机系                          
专业班级：  计算机科学与技术215班           
学   号：7020821259、7020821233、7020821257          
学生姓名： 张振、魏志新、聂建鑫         
指导教师：刘敏                              
起讫日期：   2023-12-25  ~  2024-1-5                             


目  录

第一章  基于传统协同过滤推荐算法图书借阅管理系统的概述	1
1.1问题的提出和研究背景	1
第二章  系统需求分析	1
2.1 功能需求分析	1
2.2 系统用例分析	1
第三章  系统概要设计	1
3.1 系统业务流程	1
3.2 数据库设计	1
第四章  系统实现	1
4.1  系统运行界面	1
4.2  项目文件截图	1
参考文献	1


第一章  基于传统协同过滤推荐算法图书借阅管理系统的概述
1.1问题的提出和研究背景
互联网时代，图书无论是在种类上还是在数量上都呈现激增状态，高校学生在日常的学习过程中离不开图书馆的书本借阅，而传统的借阅形式很难在数百万册的图书中快速准 确的找到目标种类，查找类似题材时更是需要耗费大量时间 成本。传统的检索形式时间成本高、检索效率低，已经完全落后于时代。相较于传统形式，智能化书目推荐系统可以通过学生偏好、兴趣度等数据进行统计分析，从而有针对性的为读者推荐相应书目，既节省时间又更为准确。为了实现高校图书馆借阅系统中的个性化推荐，以图书归还时用户的评分，作为兴趣度分量，利用传统协同过滤推荐算法，实现了用户模块中推荐模块中的推荐书籍的功能。经过20名读者，10本书的实际借阅数据验证，选择单用户推荐，每个可以推荐书籍在3到5本，而选择多用户推荐时设置的最小相似度阈值在0.6到0.9才有图书可以推荐，而低于0.6时，一般不会有图书可以推荐。而推荐给用户的图书数量会增加到4到7本。为高校图书管理提供了智能化推荐手段。
第二章  系统需求分析
2.1 功能需求分析（需要绘制功能组织结构图，并加以论述）



首先基于传统协同过滤推荐算法图书借阅管理系统的登录形式分为管理员登录和读者登录。

一、管理员登陆
登录管理员界面后有5大主要功能：
1.主页。进入主页首先显示的是已借阅的表（借阅管理），在借阅管理中点击表中的一项即可显示表内的信息。
在归还管理中点击表中的一项既显示表中的信息，也会判断用户归还后的书的数目是否为0（为0代表读者已还清这本书），若为0，则弹出信息是否删除这条记录。
2.管理图书。管理图书中具有添加图书，下架图书，修改图书，查询图书等功能，其中添加图书中ISBN为根据书名自动生成ISBN。下架图书和修改图书均是根据书的ID（界面中会显示图书信息，若不知道ID是什么，管理员会先使用查询图书的功能）进行操作。查询图书是根据书名进行模糊查询。
3.管理用户。管理用户中具有修改用户权限、查询用户、删除用户的功能。其中修改用户权限可以修改是否冻结或解冻用户账号。查询用户可根据用户账号、姓名、电话、住址进行模糊查询。
4.处理反馈。查看读者发送给管理员的消息，并可以删除该消息。
5.退出系统。


二、读者登录

登录读者界面后有5大主要功能：
1.主页。进入主页首先会显示全部图书。主页中可选择推荐图书、全部图书、查找书籍。推荐图书是根据传统协同过滤推荐算法向读者推荐读者可能喜欢的图书（关于传统协同过滤推荐算法的解释在下文中）。查找书籍功能是根据书名或出版社模糊查询。
2.我的图书。显示该读者已借阅的书籍，并可进行给书籍评分或还书数量等还书操作。
3.读者信息。显示读者个人信息，并可进行修改部分信息。
4.联系管理员。向管理员发送消息。
5.退出系统。

三、协同过滤推荐需求分析：

1.定义目标：
推荐系统的目标是基于用户的借阅后对书籍的打分推荐的。
2.收集数据：
归还书籍时，会在数据库的RecommendTable中加一条评分记录，分别有评分ID，图书ID，用户ID和评分。如果同一用户归还了同一本书，评分将取该用户的历史最高保存数据库中。
3.确定推荐算法类型：
使用基于用户的协同过滤算法，在计算相似度时用的是皮尔逊相关系数，该系统有两种基于用户的协同过滤算法的使用，一个是单用户的推荐，一个是加上最小相似度阈值的多用户的推荐。
4.数据处理：
确定对用户图书评分矩阵稀疏化，即用户没有借过的图书评分为0。
	
















2.2 系统用例分析（需要绘制用例模型图，并加以论述）


管理员用例模型图：



管理员登录系统后可在主页、管理图书、管理用户、处理反馈、退出登录,5个模块内进行操作，在主页可以进行借阅管理和归还管理两个操作。
在管理图书模块可以对图书进行添加、下架、修改、查询操作。在管理用户模块可以对用户进行修改用户权限、查询用户、删除用户等操作。
在处理反馈模块可对读者发送的消息进行操作。







用户用例模型图：

读者登录系统后可在主页、我的图书、读者信息、联系管理员、退出登录，5个模块内进行操作，在主页可以进行查看全部图书、查看推荐图书、查找图书等操作。
读者在我的图书模块可以查看读者已借阅的书籍和进行归还图书等操作。
读者在读者信息模块可以查看读者的个人信息并修改部分读者信息。
读者在联系管理员模块可以向管理员发送信息。






第三章  系统概要设计


3.1 系统业务流程（需要分别以2-3个核心功能，绘制业务流程图，并加以论述）





系统流程图：



进入系统用户首先登录，输入账号密码并选择管理员登录或读者登录。系统对其身份进行验证，若账号或密码错误则重新登录；若账号和密码正确则进入相应模块进行操作。操作完成后退出系统。















管理员流程图（读者流程图类似）


管理员登录，账号和密码输入正确后，进入管理员操作界面，管理员可在主页、管理图书、管理用户、处理反馈、退出登录,5个模块内进行操作，在主页可以进行借阅管理和归还管理两个操作。
在管理图书模块可以对图书进行添加、下架、修改、查询操作。在管理用户模块可以对用户进行修改用户权限、查询用户、删除用户等操作。
在处理反馈模块可对读者发送的消息进行操作。
最后退出系统。





















传统协同过滤推荐算法流程图：


协同过滤推荐算法设计：
用户-物品评分关系模型
设计存储用户和物品评分数据的数据库结构，以支持快速检索和更新，设计表示用户-物品评分关系表
 
算法实现
实现基于用户的协同过滤算法，包括相似度计算、推荐生成等核心步骤。
通过皮尔逊相关系数计算相似度
 
皮尔逊相关系数计算的是两个用户-物品评分向量的相关系数；例如a(6,0,0,8,9);b(0,0,9,9,5)
表示有a，b用户对所有物品（示例数据中为5个物品）的评分向量，计算得出行为用户，列也为用户的相似度矩阵，该矩阵为对称矩阵，主对角都是1的一个相似度矩阵。
 
根据用户相似度，计算待推荐用户u对与其最相似的K个用户购买过商品i的感兴趣程度：
 
其中，S ( u ,K ) 为和用户u兴趣最接近的K个用户，rvi 代表用户对物品i 的兴趣，因为只是用了行为数据，所以rvi=1.
 
单用户推荐中K为1，多用户推荐中K由最小相似度阈值决定。

部分代码截图：


	






推荐结果展示：


3.2 数据库设计（需要绘制E-R图和逻辑表，并加以论述）

E-R图：

用户的属性有：借阅量、用户ID、姓名、性别、年龄、住址、联系方式、账号、密码、账号是否冻结。
管理员的属性有：账号、密码、管理员ID。
图书的属性有：被借阅量、图书介绍、ISBN、数量、出版社、书名、类型、图书ID
归还的属性有：借书ID、图书ID、实际归还日期、图书评分。
推荐的属性有：用户ID、图书ID、图书评分、评分ID。
借阅的属性有：借书数、借书ID、图书ID、借书日期、预计还书日期、用户ID。
其中管理员管理用户和图书，用户可借阅和归还图书，并向用户推荐图书。

逻辑表：

1．AdminTable(管理员信息表)
字段名	数据类型	长度	主键否	描述
AdminID	int	4	主键	管理员ID
AdminAccount	nchar	10		管理员账户
AdminPassword	varchar	20		管理员密码
AdminTable用于存放管理员的属性信息
2.UserTable(读者信息表)
字段名	数据类型	长度	主键否	描述
UserID	int	4	主键	读者ID
UserAccount	nchar	10		读者账户
UserPassword	varchar	20		读者密码
UserIsFrozen	bit	1		读者账户是否被冻结
UserName	varchar	30		读者账户名
UserSex	nchar	10		读者性别
UserAge	int	4		读者年龄
UserAddress	nchar	50		读者地址
UserTelephone	nchar	11		读者联系方式
UserBorrowCount	int	4		读者借书量
UserTable用于存放读者用户的属性信息

3.BorrowTable(借出表)
字段名	数据类型	长度	主键否	描述
BorrowBookID	int	4	主键	借书ID
BookID	int	4		图书ID
UserID	int	4		读者ID
BorrowDate	Datetime	8		借出时间
ReturnDate	datetime	8		归还时间
BookCount	int	4		书籍数量
BorrowTable用于存放借出的图书，借出表的属性信息
4.ReturnTable(归还表)
字段名	数据类型	长度	主键否	描述
ReturnID	int	4	主键	归还ID
BorrowBookID	int	4		借书ID
ReturnBookScore	int	4		书的评价
ReturnTable用于存放图书归还后的归还表的属性信息

5.MessageTable(用户给管理员发消息的消息表)
字段名	数据类型	长度	主键否	描述
MessageID	int	4	主键	消息ID
Message	varchar	-1		来自读者的消息
UserID	int	4		读者ID
DateTime	datetime	8		发送消息的时间
MessageTable主要用于存放读者用户给管理员发的消息

6．BookTable（图书信息表）
字段名	数据类型	长度	主键否	描述
BookID	int	4	主键	图书的ID
BookName	varchar	50		书名
BookPress	varchar	50		出版社
BookCount	int	4		图书的数量
ISBN	int	4		ISBN
BookCategory	varchar	50		图书的类型
BookRemark	varchar	5000		图书的介绍
BookBorrowCount	int	4		被借出的书的数量
BookImage	image	16		图书的图片
BookTable用于存放图书的属性信息


7.RecommendTable（推荐表）
字段名	数据类型	长度	主键否	描述
RecommendID	int	4	主键	推荐ID
UserID	int	4		读者ID
BookID	int	4		图书ID
Score	int	4		图书的评分
RecommendTable用于存放向读者用户推荐图书的推荐表的属性信息

第四章 系统实现

4.1  系统运行界面（截三个以上的系统运行界面的图，并加以论述）


管理员进入系统后首先显示借阅管理，点击表格后会显示图书信息。


在管理员界面的管理图书界面中的修改图书，首先显示表中全部图书的信息，输入要修改图书的ID后，鼠标移动，界面中会自动显示要修改的图书信息，编辑修改后的信息保存。











在管理员界面的管理用户中的查询用户，首先看到的是全部的用户。
可根据用户的账号、姓名、电话、住址进行模糊查询
例如：

输入信息后，点击查询，就会显示模糊查询的结果。











进入读者用户的界面中，首先看到的是全部图书的信息。当点击表中任意图书会提示：请在搜索框中输入 点击的书名。




点击查找书籍后，会显示图书信息，以及可以对该图书进行借阅。





在读者用户界面中的联系管理员模块中，可向管理员发送消息，点击发送后，按钮会进入5秒的休眠状态，防止读者连续点击。






当读者发送消息后，管理员界面可以接收到读者的消息，并可删除消息。

4.2  项目文件截图（截取项目文件结构图，并加以论述）


Admin.cs用于获取或设置账号和密码。
AdminBook.cs 用于设置添加、下架、修改、查找图书的按钮和相关面板Panel。
AdminBookAdd.cs  用于设置添加图书的界面。
AdminBookDelete.cs  用于设置下架图书的界面。
AdminBookModify.cs 用于设置修改图书的界面。
AdminBookQuery.cs 用于查询图书的界面。
AdminContact.cs  用于管理员查看读者用户发送的信息。
AdminForm.cs   用于设置管理员登录的主界面。
AdminHome.cs   用于设置管理员登录的主页的界面，包含借阅管理和归还管理。
AdminUser.cs  用于设置管理员登录的用户管理的界面，包含修改、查询、删除等按钮。
AdminUserDelete.cs 用于设置AdminUser中的删除用户界面。
AdminUserModify.cs 用于设置AdminUser中的修改用户权限界面。
AdminUserQuery.cs 用于设置AdminUser中的查询用户界面。
Book.cs 用于设置图书的属性，包含多个重载构造函数。
Borrow.cs 用于设置借阅图书时的属性，包含多个重载构造函数。
DButil.cs  工具类，包含关于连接数据库等大量函数。
Form1.cs  用于设置读者用户登录的界面。
LoginForm.cs 用于设置登录界面，包含输入账号密码，登录、注册。
Message.cs 用于设置读者向管理员发送消息时的属性，包含多个重载构造函数。  
ModifyInfo.cs 用于设置用户界面的修改用户信息板块。
MyBook.cs  用于设置我的图书的界面，包含查看图书信息和归还图书。
Program.cs  主程序的入口。
Recommend.cs  用于设置向读者用户推荐图书时的属性，包含一个默认的构造函数。
SigninForm.cs 用于设置读者用户注册的界面。
User.cs  用于设置读者用户的属性，包含多个重载构造函数。
UserHome.cs 用于设置读者用户登录的主页界面，包含推荐、查找图书和全部图书。
UserHomeFindAllBook.cs 用于设置用户登录主页中的全部图书界面。
UserHomeFindBook.cs 用于设置用户登录主页中的查找图书界面。
UserHomeRecommendBook.cs 用于设置用户登录主页中的推荐图书的界面。
UserInfo.cs 用于设置用户登录的修改读者用户信息的界面。
UserLinkAdmin.cs 用于设置用户向管理员发送消息的界面。

工程训练成绩评定表
项目名称	基于协同过滤推荐算法图书借阅管理系统的设计与实现


设计任务与要求	（学生填写）
    该项目主要是分为两大板块，一个是用户浏览借阅图书，还一个是管   理员管理用户和图书。对于用户浏览借阅图书，主要有图书查询，借阅，归还，评分，推荐和联系管理员。对于管理员管理图书和用户，主要有修改用户权限，包括用户的最大借阅量，用户解冻与冻结，查询用户信息，删除用户，对于管理图书方面主要有添加图书，修改图书，查询图书，删除图书。除了管理用户和图书，还有管理借阅与归还记录，主要在管理借阅记录时，如果用户全部还书，可以删除这次借阅记录，但是删除借阅记录会级联删除到用户图书的评分表，将会影响到推荐给用户的图书，对于管理归还记录，主要是管理归还逾期的记录，如果归还逾期，管理员将可选择冻结该用户，使得该用户不能借阅图书了。最后还有管理员处理用户反馈的模块，该模块是查看用户发给管理员的信息，例如，账号被冻结，借阅量需要增加。管理员根据用户反馈信息，可以更改该用户的权限。






指导教师评语	









      建议成绩：                        指导教师：

时间：     年    月     日
